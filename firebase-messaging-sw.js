// Firebase Messaging Service Worker
// This file is required for Firebase Cloud Messaging to work

importScripts('https://www.gstatic.com/firebasejs/12.4.0/firebase-app-compat.js');
importScripts('https://www.gstatic.com/firebasejs/12.4.0/firebase-messaging-compat.js');

// Initialize Firebase in the service worker
const firebaseConfig = {
  apiKey: "AIzaSyDMhOCALyIYv9UtNdSMFg2VHsS_8jyuWpU",
  authDomain: "checklista-f9bbf.firebaseapp.com",
  databaseURL: "https://checklista-f9bbf-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "checklista-f9bbf",
  storageBucket: "checklista-f9bbf.firebasestorage.app",
  messagingSenderId: "376058394469",
  appId: "1:376058394469:web:0b1b1b8946ec4ab666938c",
  measurementId: "G-GQ97VMK656"
};

firebase.initializeApp(firebaseConfig);

// Retrieve Firebase Messaging object
const messaging = firebase.messaging();

// Handle background messages
messaging.onBackgroundMessage((payload) => {
  console.log('[firebase-messaging-sw.js] Received background message ', payload);
  
  const notificationTitle = payload.notification?.title || 'Cheklista';
  const notificationOptions = {
    body: payload.notification?.body || 'Du har en ny uppdatering!',
    icon: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAYAAABS3GwHAAAAAXNSR0IArs4c6QAADMdJREFUeF7tnXuQVdURxj+GRVYeigZQUIyKqCFqfKFGjfERNRVjrFjGqhgfSYyWsZJYicZKbCWpWMYqlZhKYixjxRJfqVhJLOMjxldijK9YxvhKjK8Y31ERBVkQFhZ2M1393HPnzp179917z+3u/quY2Xv69Olv+nt9+nT3dI9JkiS4YQQaRmBMw3rWziJgBGjEjUCjCNAINI1A0/rXzhoB04CmEWhaA04//fQkSZIbzDh9+vQLPCJ33nmnOzY2Nvbu3bsfsL8+Pj7+nMsuu+wNqnfv3p3sueeeJ1IxTz311HaXAa6++uqHXnvtteGXX345GT9+/Ps33HDDHZo/Tp40aVLy8MMP3+uyz+8TJkyYdOKJJ/6a/b777rv6d7/73ScB8IYoykuvvPLKJ6ZPn77DbbfddhMn74033uj4OfzwwzvOPvvss6j4wAMP/Mblj18nTZo05aijjvos9d9+++3XJUmyy80336wr14n9yU9+cjP7Pvzww++1Pe3YsWNq8uqrr67m+BuTJEnr5z//+e21/dQXjjjiiBcOOOCAzyzUfvGLX9xE5fvuu+8WW7P9RTPCCy+8cNfJJ5/8Ieofcsgh3fbI9q+99toTt95668/aXvVvxe+FF174tPfff/8bO++88ySaS3bbbbeP7bHHHndu3LjxqO3bt4/ff//9/wfA69/7xhtv/BOOOeaYwyh59NFHD7O///773bnnnnumPnvvvffsM88886lt27ZtOeigg94CwEs/+9nPnjbsqNABGnUjQCPQNAI0Ak0j0LT+tbNGwDS4aQSa1oCbb775JoYGP8dQZ9gVK1ZcyrnDpUuXDnPgzJkz7+fcp2y7deuWT0ycOLGX2jOmT5/+8BtvvLGJ2o888sg8Di5YsGDoS1/60n2c+xbnnz9//nDs7Nixo8sZ3h0AjjjiiJeeeOKJFwF45MiRLTt37pxC7SkAlClTpmyjduv27dunkf8mSZLOrbfeetmRRx45xJcjjzxy+dlnn30J+//yyy8/yb5XXHFFL7Unrlq16tM77LDDJOq/dfzxx/+Lc0+dOHGiO++880453w8+uNrVq1e/Bq6lS5eu3m+//d6kduu8efO+iZz777//8aeffvrNJ554om+wXzDDv/3tb6ddf/31N1N/0x133DGV+q+yT3bs2LH1wQcffJHaO9x2222XUnvqbbfddgUy/OAHP/j9wfYUOkCjbgRoBJpGoGkEmta/dtYImAY0jUDTGnDzzTdfBUDpgQceeDPAzZkzZyj37rvvfpfcc+fO7eXcgw8+eJjcX//61/s4d8wxx9zLuU8fffTR83xOKyOD5K5bt24Dta9n3yEAbNu2bSrn1gJg0qRJW6g9ne1eJGcHAHy7Bxk8AnjbtGkT9SdSu3Xq1Km9bO969tlnd7Pv5JNPfuPZZ599le1ey7APf/jDD7+IXI8//vgLnPsCA8Pv9/VeQGbJ7WcfspOhoZOgDJL77W9/+xLCfZQS+oMPPnj1Cy+88A/2/fKOO+64k32/jExedn0Z9ot/jz/++IvI+eSa6N+AZsAINI1A0wo4Cjrj5Sj+jZejoKNl5/ylRY4q1FZYjxd1IkBGqm38Nwt2k+2Y8a8WNE2Lm0agKJpmtCt+w4z3c+o0/F5RPQVtKYGdBXJmcZQ6DT7KGW9XyJCTX6V6OVCnDj7qGmNiO10a9m7wRo4ySCOJFJBGShipuWOgxn/bXS8/KtbXTCMZ1PkjpAAaNSpExH9z9mwKyEgL8c9HmSnZagQYAQlrN3S5PfJ1OZ/qXEpGTrAIV7W86P5/OmYnNy0L5CiHyOdMmEOxs4ujCPV1lKcFV2VZypZlJy9n3hJlZNQdaZnIV7Y/xw/l5W9atjrbK9rJXlO8Y1Kbj/WjZ89evKwJaKL1wdOQ0JRzzjln6/XXX78Ep8s3UvqOuu6662673JnJOw4BDSaJN47/tnGOjJoB1A+0kgVK9kQaHE0j0DQCOmN0XwwPOb/eO8uFAwCo77zzzu9wLbhUjw5//vOf/5nzn1555ZWdQ2/7RwOGn7lJV8nWo6rXNwJNI6DH1m7n1a997WuXUH8nGHTJJZccR/2dYNCtt956JfV3gkFnn332hQDwyU9+8lOun7k1ykNRUAYZ1UbQKPWjtUOZyWVg1Bjbev3YpJEzChKYqJl0AUTLKFqJCeGgQaKs3tIWKKs3tndrpGZpKoMyNfJTQ8YoyBAzH0Qjh0LRsz2OBlJHU6NnGKLVhiaDZCMNfCQHJz+z1Fg8CsX2KFJGZfF/9NZFGp71d1Z3VZdxZfTnyKKsLNKGTD36+0g+fK8uflD7+Oj8f9bfRfFbZf05ZYzSLFp/RfXf9q4b7a/tbfRhfDXMEGlUo3Qd/xLZZOCykEMsf4mww7I6aWFWD6Nc/VuVfOV+p+WfNGNH+RtH+19FnUrKEPl/I2DKA63RTvJRcshpNUd/rG+0Nm8dWTj+5/hfdo4+kqPK2EsN8fcCjQJGaVZdxr+sPOX7f9lv2H5tLEfJ1z+fksGf6Y1s6vGkOv0VKlJGOWOgPxVCpyGPGoqifYnWVqI1LKmP5pNqRWuf6vMajTzyQ1L1KCrKFjVOlPKPyRJldDRLrZF9FN1+/P+ofqqxZdHaX/WZrvprPl5ZPnp/V1Y/3ov7vvxh9vdOhaTTQ4a8Oo2CWoHVEDXKgKLKUIaGyvD/deoYRNLjSA7ViNeVJ1Yfgoy8vDw/lNe3yvKqqr8a3xRpq6hn1XJWS9/yx8caa5Zj7aK6U50dRWtHozSeRt4D5LU/3fq7DL7I/z9KM9bFb9tpbQSa1r929gjQjbQRaBqBphFoWv/aWdNAb4SiBoGisO9aX6N1t3U1D/ptWh1NeEcZQJlR5c4oeaLoq/I9TBCp7K5FzcaXzUPpsjXKGJJjfHmjgvSZTnlLaZ0qy96CZJFXZeu8v1VGFJWj7I5PKl/YXaEy5axrZKuy3dHyo6Jkq0ouZfGGOhpQ1RhI77vW+Qalre5xVVq2Kuaoo/nfzgI1jUDTCMjBJcbIxjHUm8GtbgSlLGo4nwjMdBNQTQzVQE6NgLzZ2VGwkZHdvFGUfQ8g3YXPQHQH6mgULsrRqHZ9Yj2+brvK0oiIFjR2YmZZ+rJlS8eGJoOkB3rj7SL/7+fxX/2rj+K/gG+jrHNLOXTW2dXF5YlKf9N6o/VH73PqaE3U/l/N5M8YN+I/daxVGU3ILh8SmaPN9Xhv67Q0zKhVWzKoQdCIkjI0Oqb3ADqKpLNLGuWqGo3W0YLsOUCWEeIy8o1wFCSkc0tONjq/K6O/y6izsipKfxcty3eY/z8L+fW66bvzpPXX1Gc6lYR0Zl1XHTBCGZFOb6qw4z8KVMpQ6SyCQu1RuWgf4ChvEfqzKPm/n0e/l9GfZXRJZGhlf2N7fDM9yhvUf3+c9fczlI0IXVnGD79tJ+vcqQOCXF+tYS4zfhFGjHL6OyL++zOqjhyO/yr1lyqnBDRKrqLksJdKyq5GRh2KJ+8A6jjG5Iyss1XN6NwX1c/5+x9K/q7D6Y2o9j1VtsKJh/D6PVH0OEtHy7LK8EaVDJJPFhfpqJAjd11MJ3ur5KtOWF/V7C9laPyWjk7o3aay9Be6P3F1dkmXvYXhty8a+VafZo0dJYvjv/6xWZ3k8IaJOvUXrT+0/66qE67y/gJFaPRTO2sEaAQcAQdfW5BoG2sE6mHE6J9i7VkjQDfORqBpBKwE1A3TMFFYcyMgZ6Aa3dLokMLRGjvKQNWVQw0XJa/y4rJlZNFZrCqfI3Wj8Z5eF5bR3+7pT7cdymvOQKGNtEazyk4eOzOoZyQ5/quyMtKxk29U2B5lhOhIk/63r8tGYRnI1NFU6luvORs5CtfH/LPnNMqyLQvJeGJdmxCtEIeZA5SZwRcmw3v6xpxvYlp1dYZJO5lFmKi5cYctVbMPiR7FdjPEOpUt1wOqFdIJlNEcgYI/K7fvQo6M8u8lBxc72O3iZ1EGJvJGOepkl4seDdK/9XGdPLPaD1XW2FEzq+oc1PcAjta3nfaR4wpfFYl84zeNQNMINA2SbtLqzaGjtfpyULrGm8LGsI2J5mSkH9KZQz2+q8xR9dM5QGXr2oaaE59O/R3hVK0qjbRYfPvZQ2Vo1MQf9ydNJaGfDJdVRhV8rHKfoWWNwvmycpbNq9ZdTl8XEMvqr8ivWl/7fVoKI7t6c+joNmeN8s6bnqOr5s7S3xiRJkOjtK+iZav7rK2fM1ItJatRRJdpbU91oHF1lONLE9W1lf6NKk83BF1+rKKb7GhP1dqYR9vr9Gke3TKsr2rNHjUGUtaxaR+5/X1lS5dF9kfRJZaWbStn6S7tY6NnbXWUdNnyov6+Ka+KtKCyp63Lt6py+PqLvJ2O9IqsUkZ1jN/GN0d/Z7ensfJE9WNMdh09jJE1hshR0r8a/6N95uqo/ijq76w+jrKOVXkKfEL98Lqr/kWdLyMrbbQRaBqBphFoWv/aWSNgGtA0Ak1rwLnnntvF+ddTfycYdPnllx9P/Z1g0K233nol9XeCQeecc86FAHS1XRF6y5YtR8+ePXuI1i+//PI5M2bMGIZBhx566Dsvu+yy52jLdttt13/kkUe+Sv2dte7C4sWLl3z0ox996i9/+ctCPrGg6Lnnnts6adKkLtq3ff/73x/6ztNPP933kksuOZ367du3d7kk+WLy5Ml/v+GGG+6k/bQ33njjRCo++OCDS/faa68hPrJqTmVnDJpGoHGNF4aDGQ3ZFo9oGdW2NpJRo7DOGKgGVEXJUdR1fFVlq7MVrb2ryKFtyq67LHl829qWKk9A1ekbjYBy/NeZR9m6ykbOOqjfERANcYyQbrKxzqrpyKHOr1nkUF28jyOHOt6m/g05OwKigZRjYjrr6r+a7Qj5/4MOOqj/0Ucf/Svm6M455xx36qmnvsI5xX7fe++977rsssteZh/lnyQHW7//Oefbn3rqqeF33333lEcffXTphRde+E8A2OLcgQce+IqL9QHQX/7yl+944403fnLXXXf9g9qz1q5d+8+pU6cu/eUvf/lPPp+gvPOVV175b+oXANOsWbPeJunew/mbb7559a677rqJOb/s+M2bN3+I8/u/8sorjz788MO7XXvttav5vqOPrr/++rup/w7nz6N1+/fcc8/Vf/vb365CjnfffXfHO++88wqZXrXPPvu8+vjjj39+zz33XP7EE088xTn65nWAf+/dd9/9zd///vev4PQr9JXL5aZNm7bqhBNOWPP973//9+eff/7lrj5rrLHGGmusscYaa6yxxhprrLHGGmusscYaa6yxxhprrLHGGmusscYaa6yxxhprrLHGGmusscYaa6yxxhprrLHGGmusscYaa6yxxhprrLHGGmusscYaa6yxxhprrLHGGmusscYaa6yxxhprrLHGGmusscYaa6yxxhprrLHGGmusscYaa6yxxhprrLHGGmusscYaa6yxxhprrLHGGmusscYaa6yxxhprrLHGGmusKtf8BRh7t9nqX0jEAAAAASUVORK5CYII=',
    badge: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAYAAABS3GwHAAAAAXNSR0IArs4c6QAADMdJREFUeF7tnXuQVdURxj+GRVYeigZQUIyKqCFqfKFGjfERNRVjrFjGqhgfSYyWsZJYicZKbCWpWMYqlZhKYixjxRJfqVhJLOMjxldijK9YxvhKjK8Y31ERBVkQFhZ2M1393HPnzp179717z+3u/quY2Xv69Olv+nt9+nT3dI9JkiS4YQQaRmBMw3rWziJgBGjEjUCjCNAINI1A0/rXzhoB04CmEWhaA04//fQkSZIbzDh9+vQLPCJ33nmnOzY2Nvbu3bsfsL8+Pj7+nMsuu+wNqnfv3p3sueeeJ1IxTz311HaXAa6++uqHXnvtteGXX345GT9+/Ps33HDDHZo/Tp40aVLy8MMP3+uyz+8TJkyYdOKJJ/6a/b777rv6d7/73ScB8IYoykuvvPLKJ6ZPn77DbbfddhMn74033uj4OfzwwzvOPvvss6j4wAMP/Mblj18nTZo05aijjvos9d9+++3XJUmyy80336wr14n9yU9+cjP7Pvzww++1Pe3YsWNq8uqrr67m+BuTJEnr5z//+e21/dQXjjjiiBcOOOCAzyzUfvGLX9xE5fvuu+8WW7P9RTPCCy+8cNfJJ5/8Ieofcsgh3fbI9q+99toTt95668/aXvVvxe+FF174tPfff/8bO++88ySaS3bbbbeP7bHHHndu3LjxqO3bt4/ff//9/wfA69/7xhtv/BOOOeaYwyh59NFHD7O///773bnnnnumPnvvvffsM88886lt27ZtOeigg94CwEs/+9nPnjbsqNABGnUjQCPQNAI0Ak0j0LT+tbNGwDS4aQSa1oCbb775JoYGP8dQZ9gVK1ZcyrnDpUuXDnPgzJkz7+fcp2y7deuWT0ycOLGX2jOmT5/+8BtvvLGJ2o888sg8Di5YsGDoS1/60n2c+xbnnz9//nDs7Nixo8sZ3h0AjjjiiJeeeOKJFwF45MiRLTt37pxC7SkAlClTpmyjduv27dunkf8mSZLOrbfeetmRRx45xJcjjzxy+dlnn30J+//yyy8/yb5XXHFFL7Unrlq16tM77LDDJOq/dfzxx/+Lc0+dOHGiO++880453w8+uNrVq1e/Bq6lS5eu3m+//d6kduu8efO+iZz777//8aeffvrNJ554om+wXzDDv/3tb6ddf/31N1N/0x133DGV+q+yT3bs2LH1wQcffJHaO9x2222XUnvqbbfddgUy/OAHP/j9wfYUOkCjbgRoBJpGoGkEmta/dtYImAY0jUDTGnDzzTdfBUDpgQceeDPAzZkzZyj37rvvfpfcc+fO7eXcgw8+eJjcX//61/s4d8wxx9zLuU8fffTR83xOKyOD5K5bt24Dta9n3yEAbNu2bSrn1gJg0qRJW6g9ne1eJGcHAHy7Bxk8AnjbtGkT9SdSu3Xq1Km9bO969tlnd7Pv5JNPfuPZZ599le1ey7APf/jDD7+IXI8//vgLnPsCA8Pv9/VeQGbJ7WcfspOhoZOgDJL77W9/+xLCfZQS+oMPPnj1Cy+88A/2/fKOO+64k32/jExedn0Z9ot/jz/++IvI+eSa6N+AZsAINI1A0wo4Cjrj5Sj+jZejoKNl5/ylRY4q1FZYjxd1IkBGqm38Nwt2k+2Y8a8WNE2Lm0agKJpmtCt+w4z3c+o0/F5RPQVtKYGdBXJmcZQ6DT7KGW9XyJCTX6V6OVCnDj7qGmNiO10a9m7wRo4ySCOJFJBGShipuWOgxn/bXS8/KtbXTCMZ1PkjpAAaNSpExH9z9mwKyEgL8c9HmSnZagQYAQlrN3S5PfJ1OZ/qXEpGTrAIV7W86P5/OmYnNy0L5CiHyOdMmEOxs4ujCPV1lKcFV2VZypZlJy9n3hJlZNQdaZnIV7Y/xw/l5W9atjrbK9rJXlO8Y1Kbj/WjZ89evKwJaKL1wdOQ0JRzzjln6/XXX78Ep8s3UvqOuu6662673JnJOw4BDSaJN47/tnGOjJoB1A+0kgVK9kQaHE0j0DQCOmN0XwwPOb/eO8uFAwCo77zzzu9wLbhUjw5//vOf/5nzn1555ZWdQ2/7RwOGn7lJV8nWo6rXNwJNI6DH1m7n1a997WuXUH8nGHTJJZccR/2dYNCtt956JfV3gkFnn332hQDwyU9+8lOun7k1ykNRUAYZ1UbQKPWjtUOZyWVg1Bjbev3YpJEzChKYqJl0AUTLKFqJCeGgQaKs3tIWKKs3tndrpGZpKoMyNfJTQ8YoyBAzH0Qjh0LRsz2OBlJHU6NnGKLVhiaDZCMNfCQHJz+z1Fg8CsX2KFJGZfF/9NZFGp71d1Z3VZdxZfTnyKKsLNKGTD36+0g+fK8uflD7+Oj8f9bfRfFbZf05ZYzSLFp/RfXf9q4b7a/tbfRhfDXMEGlUo3Qd/xLZZOCykEMsf4mww7I6aWFWD6Nc/VuVfOV+p+WfNGNH+RtH+19FnUrKEPl/I2DKA63RTvJRcshpNUd/rG+0Nm8dWTj+5/hfdo4+kqPK2EsN8fcCjQJGaVZdxr+sPOX7f9lv2H5tLEfJ1z+fksGf6Y1s6vGkOv0VKlJGOWOgPxVCpyGPGoqifYnWVqI1LKmP5pNqRWuf6vMajTzyQ1L1KCrKFjVOlPKPyRJldDRLrZF9FN1+/P+ofqqxZdHaX/WZrvprPl5ZPnp/V1Y/3ov7vvxh9vdOhaTTQ4a8Oo2CWoHVEDXKgKLKUIaGyvD/deoYRNLjSA7ViNeVJ1Yfgoy8vDw/lNe3yvKqqr8a3xRpq6hn1XJWS9/yx8caa5Zj7aK6U50dRWtHozSeRt4D5LU/3fq7DL7I/z9KM9bFb9tpbQSa1r929gjQjbQRaBqBphFoWv/aWdNAb4SiBoGisO9aX6N1t3U1D/ptWh1NeEcZQJlR5c4oeaLoq/I9TBCp7K5FzcaXzUPpsjXKGJJjfHmjgvSZTnlLaZ0qy96CZJFXZeu8v1VGFJWj7I5PKl/YXaEy5axrZKuy3dHyo6Jkq0ouZfGGOhpQ1RhI77vW+Qalre5xVVq2Kuaoo/nfzgI1jUDTCMjBJcbIxjHUm8GtbgSlLGo4nwjMdBNQTQzVQE6NgLzZ2VGwkZHdvFGUfQ8g3YXPQHQH6mgULsrRqHZ9Yj2+brvK0oiIFjR2YmZZ+rJlS8eGJoOkB3rj7SL/7+fxX/2rj+K/gG+jrHNLOXTW2dXF5YlKf9N6o/VH73PqaE3U/l/N5M8YN+I/daxVGU3ILh8SmaPN9Xhv67Q0zKhVWzKoQdCIkjI0Oqb3ADqKpLNLGuWqGo3W0YLsOUCWEeIy8o1wFCSkc0tONjq/K6O/y6izsipKfxcty3eY/z8L+fW66bvzpPXX1Gc6lYR0Zl1XHTBCGZFOb6qw4z8KVMpQ6SyCQu1RuWgf4ChvEfqzKPm/n0e/l9GfZXRJZGhlf2N7fDM9yhvUf3+c9fczlI0IXVnGD79tJ+vcqQOCXF+tYS4zfhFGjHL6OyL++zOqjhyO/yr1lyqnBDRKrqLksJdKyq5GRh2KJ+8A6jjG5Iyss1XN6NwX1c/5+x9K/q7D6Y2o9j1VtsKJh/D6PVH0OEtHy7LK8EaVDJJPFhfpqJAjd11MJ3ur5KtOWF/V7C9laPyWjk7o3aay9Be6P3F1dkmXvYXhty8a+VafZo0dJYvjv/6xWZ3k8IaJOvUXrT+0/66qE67y/gJFaPRTO2sEaAQcAQdfW5BoG2sE6mHE6J9i7VkjQDfORqBpBKwE1A3TMFFYcyMgZ6Aa3dLokMLRGjvKQNWVQw0XJa/y4rJlZNFZrCqfI3Wj8Z5eF5bR3+7pT7cdymvOQKGNtEazyk4eOzOoZyQ5/quyMtKxk29U2B5lhOhIk/63r8tGYRnI1NFU6luvORs5CtfH/LPnNMqyLQvJeGJdmxCtEIeZA5SZwRcmw3v6xpxvYlp1dYZJO5lFmKi5cYctVbMPiR7FdjPEOpUt1wOqFdIJlNEcgYI/K7fvQo6M8u8lBxc72O3iZ1EGJvJGOepkl4seDdK/9XGdPLPaD1XW2FEzq+oc1PcAjta3nfaR4wpfFYl84zeNQNMINA2SbtLqzaGjtfpyULrGm8LGsI2J5mSkH9KZQz2+q8xR9dM5QGXr2oaaE59O/R3hVK0qjbRYfPvZQ2Vo1MQf9ydNJaGfDJdVRhV8rHKfoWWNwvmycpbNq9ZdTl8XEMvqr8ivWl/7fVoKI7t6c+joNmeN8s6bnqOr5s7S3xiRJkOjtK+iZav7rK2fM1ItJatRRJdpbU91oHF1lONLE9W1lf6NKk83BF1+rKKb7GhP1dqYR9vr9Gke3TKsr2rNHjUGUtaxaR+5/X1lS5dF9kfRJZaWbStn6S7tY6NnbXWUdNnyov6+Ka+KtKCyp63Lt6py+PqLvJ2O9IqsUkZ1jN/GN0d/Z7ensfJE9WNMdh09jJE1hshR0r8a/6N95uqo/ijq76w+jrKOVXkKfEL98Lqr/kWdLyMrbbQRaBqBphFoWv/aWSNgGtA0Ak1rwLnnntvF+ddTfycYdPnllx9P/Z1g0K233nol9XeCQeecc86FAHS1XRF6y5YtR8+ePXuI1i+//PI5M2bMGIZBhx566Dsvu+yy52jLdttt13/kkUe+Sv2dte7C4sWLl3z0ox996i9/+ctCPrGg6Lnnnts6adKkLtq3ff/73x/6ztNPP933kksuOZ367du3d7kk+WLy5Ml/v+GGG+6k/bQ33njjRCo++OCDS/faa68hPrJqTmVnDJpGoHGNF4aDGQ3ZFo9oGdW2NpJRo7DOGKgGVEXJUdR1fFVlq7MVrb2ryKFtyq67LHl829qWKk9A1ekbjYBy/NeZR9m6ykbOOqjfERANcYyQbrKxzqrpyKHOr1nkUF28jyOHOt6m/g05OwKigZRjYjrr6r+a7Qj5/4MOOqj/0Ucf/Svm6M455xx36qmnvsI5xX7fe++977rsssteZh/lnyQHW7//Oefbn3rqqeF33333lEcffXTphRde+E8A2OLcgQce+IqL9QHQX/7yl+944403fnLXXXf9g9qz1q5d+8+pU6cu/eUvf/lPPp+gvPOVV175b+oXANOsWbPeJunew/mbb7559a677rqJOb/s+M2bN3+I8/u/8sorjz788MO7XXvttav5vqOPrr/++rup/w7nz6N1+/fcc8/Vf/vb365CjnfffXfHO++88wqZXrXPPvu8+vjjj39+zz33XP7EE088xTn65nWAf+/dd9/9zd///vev4PQr9JXL5aZNm7bqhBNOWPP973//9+eff/7lrj5rrLHGGmusscYaa6yxxhprrLHGGmusscYaa6yxxhprrLHGGmusscYaa6yxxhprrLHGGmusscYaa6yxxhprrLHGGmusscYaa6yxxhprrLHGGmusscYaa6yxxhprrLHGGmusscYaa6yxxhprrLHGGmusscYaa6yxxhprrLHGGmusscYaa6yxxhprrLHGGmusscYaa6yxxhprrLHGGmusscYaa6yxxhprrLHGGmusKtf8BRh7t9nqX0jEAAAAASUVORK5CYII=',
    vibrate: [100, 50, 100],
    data: {
      dateOfArrival: Date.now(),
      primaryKey: '1'
    },
    actions: [
      {
        action: 'explore',
        title: 'Öppna appen'
      },
      {
        action: 'close',
        title: 'Stäng'
      }
    ]
  };

  self.registration.showNotification(notificationTitle, notificationOptions);
});

// Handle notification clicks
self.addEventListener('notificationclick', (event) => {
  console.log('[firebase-messaging-sw.js] Notification click received.');

  event.notification.close();

  if (event.action === 'explore') {
    // Open the app
    event.waitUntil(
      clients.openWindow('/')
    );
  } else if (event.action === 'close') {
    // Just close the notification
    console.log('Notification closed.');
  } else {
    // Default action - open the app
    event.waitUntil(
      clients.openWindow('/')
    );
  }
});